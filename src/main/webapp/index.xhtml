<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>
        	<h:outputText value="#{msg.title}" />
        </title>
    </h:head>
    <h:body>
        <h:outputText value="#{msg.welcomeMessage}" />
        <h:form>
        	<table>
        		<tr>
        			<td>
        				<h:outputText value="#{msg.name}" />			
        			</td>
        			<td>
        				<h:inputText id="name" value="#{registrations.currentUser.name}" />
        			</td>
        			<td>
        				<h:message for="name" />
        			</td>
        		</tr>
        		<tr>
        			<td>
        				<h:outputText value="#{msg.email}" />			
        			</td>
        			<td>
        				<h:inputText id="email" value="#{registrations.currentUser.email}" 
        							 validator="#{emailValidator.emailValidator}" />
        			</td>
        			<td>
        				<h:message for="email" />
        			</td>
        		</tr>
        		<tr>
        			<td>
        				<h:outputText value="#{msg.cnp}" />			
        			</td>
        			<td>
        				<h:inputText id="cnp" value="#{registrations.currentUser.cnp}" 
        							 validator="#{cnpValidator.cnpValidator}" />
        			</td>
        			<td>
        				<h:message for="cnp" />
        			</td>
        		</tr>
        		<tr>
        			<td>
        				<h:outputText value="#{msg.city}" />			
        			</td>
        			<td>
        				<h:inputText id="city" value="#{registrations.currentUser.city}" />
        			</td>
        			<td>
        				<h:message for="city" />
        			</td>
        		</tr>
        		<tr>
        			<td>
        				<h:outputText value="#{msg.country}" />			
        			</td>
        			<td>
        				<h:inputText id="country" value="#{registrations.currentUser.country}" />
        			</td>
        			<td>
        				<h:message for="country" />
        			</td>
        		</tr>
        		<tr>
        			<td>
        				<h:outputText value="#{msg.candidate}" />			
        			</td>
        			<td>
        				<h:selectOneMenu id="candidate" value="#{registrations.currentCandidate.name}">
        					<f:selectItems value="#{candidates.allCandidates}" 
      								var="candidate"
      								itemValue="#{candidate.name}" 
      								itemLabel="#{candidate.name}"/>
        				</h:selectOneMenu>
        			</td>
        			<td>
        				<h:message for="candidate" />
        			</td>
        		</tr>
        		<tr>
        			<td colspan="3">
        				<h:commandButton value="#{msg.vote}" rendered="#{!registrations.success}">
        					<f:ajax event="click" listener="#{registrations.register()}" 
        							execute="@form" render="@form" />
        				</h:commandButton>			
        				<h:outputText rendered="#{registrations.success}" value="#{msg.successfulRegistration}" />
        			</td>
        		</tr>
        	</table>
        </h:form>
    </h:body>
</ui:composition>